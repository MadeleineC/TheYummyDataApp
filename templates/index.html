<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
<<<<<<< HEAD
    <title>Yummy Data Map</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

=======
    <title>project map</title>
>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2
    <script
        src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E="
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.0.1/dist/leaflet.js"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <!-- <script type="text/javascript" src="leaflet-heat.js"></script> -->

    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.css"/>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.Default.css"/>
    <script type="text/javascript" src="https://unpkg.com/leaflet.markercluster@1.3.0/dist/leaflet.markercluster.js"></script>
    <script type="text/javascript" src="https://unpkg.com/leaflet.markercluster@1.3.0/dist/leaflet.markercluster-src.js"></script>
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel = "stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.2/leaflet.css"/>
  <script type="text/javascript" src="http://timwis.com/leaflet-choropleth/dist/choropleth.js"></script>
  <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
  <script type="text/javascript" src="https://unpkg.com/leaflet.markercluster@1.3.0/dist/leaflet.markercluster-src.js"></script>
<<<<<<< HEAD
  


  <script type="text/javascript" src="{{ url_for('static', filename='js/bootstrap.min.js')}}"></script>
  <script type="text/javascript" src="{{ url_for('static', filename='js/msg.js') }}"></script>
  <link rel="shortcut icon" href="{{ url_for('static', filename='icon/burger.ico') }}">
  <!-- <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}"> -->
  
</head>


=======
 
  </head>
>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2
<body>

    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
<<<<<<< HEAD
            <a class="navbar-brand" href="index.html">
=======
            <a class="navbar-brand" href="index_leaflet.html">
>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2
                <span class="glyphicon glyphicon-bookmark" aria-hidden="true"></span>
                &nbsp; <strong>Y</strong>ummy data map &nbsp;
            </a>
            </div>
            <ul class="nav navbar-nav navbar-right">

                <!-- 
                    this one will be a JS popup on click explaining on things work 
                -->

<<<<<<< HEAD
                    <li>
                        <a href="#" data-toggle="modal" data-target="#exampleModalCenter">
                        <!-- <a href="#">
                            <span class ="" onclick="msg_cust.show([faq_name, faq_msg]);" aria-hidden='true'>
                                &nbsp; FAQ
                            </span> -->
                            <!-- <span class="" aria-hidden="true" data-toggle="modal" data-target="#exampleModalCenter">
                                &nbsp; FAQ
                            </span> -->
                            <!-- Button trigger modal -->
                            <!-- <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter"> -->
                                FAQ
                            <!-- </button> -->
                            </a>
                            <!-- Modal -->
                            <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLongTitle">Yummy Data Map FAQ</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                    </div>
                                    <div class="modal-body">
                                            <h5>Popover in a modal</h5>
                                            <p>This <a href="#" role="button" class="btn btn-secondary popover-test" title="Popover title" data-content="Popover body content is set in this attribute.">button</a> triggers a popover on click.</p>
                                            <hr>
                                            <h5>Tooltips in a modal</h5>
                                            <p><a href="#" class="tooltip-test" title="Tooltip">This link</a> and <a href="#" class="tooltip-test" title="Tooltip">that link</a> have tooltips on hover.</p>
                                        </div>
                                    <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                    <button type="button" class="btn btn-primary">Save changes</button>
                                    </div>
                                </div>
                                </div>
                            </div>
                        <!-- </a> -->
                    </li>
=======
                    <li><a href="#"><span class ='' aria-hidden='true'></span>&nbsp; FAQ</a></li>
>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2

                <!-- 
                    this one will just be a generic contact us button (email or something)
                 -->

                    <li><a href="contact.html"><span class ='' aria-hidden='true'></span>&nbsp; Contact Us</a></li>
                   
                </ul>
                                <!-- <ul class="nav navbar-nav navbar-right">
                                    <form class="form-inline">
                                        <div class="form-group mb-2">
                                            <input type="text" class="form-control" id="city" placeholder="City">
                                        </div>
                                        <div class="form-group mx-sm-3 mb-3">
                                            <input type="text" class="form-control" id="state" placeholder="State">
                                        </div>
                                        <div class="form-group mx-sm-3 mb-3">
                                            <input type="text" class="form-control" id="cuisine" placeholder="Cuisine">
                                        </div>
                                        <a class="btn btn-primary btn-lg" href="/fetch" role="button">Search</a>
                                    </form>
                                </ul> -->



            </div><!-- /.navbar-collapse -->
        </nav>    
        <div class="row">
        <ul class="nav navbar-nav navbar-right">
<<<<<<< HEAD
                <form method="POST" action="/fetch/" role="form" name="foodstring" class="form-inline">
                  <div class="form-group mb-2">
                      <input type="text" class="form-control" id="city" name="city" placeholder="City">
                  </div>
                  <div class="form-group mx-sm-3 mb-3">
                      <input type="text" class="form-control" id="state" name="state" placeholder="State">
                  </div>
                  <div class="form-group mx-sm-3 mb-3">
                      <input type="text" class="form-control" id="cuisine" name="cuisine" placeholder="Cuisine">
                  </div>
                  <input type="submit" value="Search" class="btn btn-default">
                  <!-- <a href="http://127.0.0.1:5000/"class="btn btn-primary btn-lg" onclick="fetch(this.href); return false;" role="button"id="search" >Search</a> -->
                  <!-- <a class="btn btn-primary btn-lg" href="#" role="button" id="search">Search</a> -->
                  
=======
                <form class="form-inline">
                  <div class="form-group mb-2">
                      <input type="text" class="form-control" id="city" placeholder="City">
                  </div>
                  <div class="form-group mx-sm-3 mb-3">
                      <input type="text" class="form-control" id="state" placeholder="State">
                  </div>
                  <div class="form-group mx-sm-3 mb-3">
                      <input type="text" class="form-control" id="cuisine" placeholder="Cuisine">
                  </div>
                  <a class="btn btn-primary btn-lg" href="/fetch" role="button">Search</a>
>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2
                </form>
          </ul></div>

          <!-- 
              
            the below should load the details on when the database was last updated 
            
            we can have this only show up when a city is searched (so if we pre-load austin/taco,
                this label won't display)
        -->
          <div class="row">
              <div class="col-md-3"></div>
              <div class="col-md-3"></div>
              <div class="col-md-3"></div>
<<<<<<< HEAD
              <div class="col-md-3 offset-md-9" id="accessed" style="display:none;">last updated: </div>
            </div>
            <!-- <div id='pie'>{{test}}</div> -->
=======
              <div class="col-md-3 offset-md-9" id="accessed">last updated: </div>
            </div>
>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2
        <div class="container-fluid" id='map'>                              
        </div>


<style>
/* remove default margin and padding from body */
body {
  padding: 0;
  margin: 0;
}

/* set map, body, and html to 100% of the screen size */
#map,
body,
html {
  height: 90%;
  width: 90%
}

.legend {
  line-height: 18px;
  color: #555;
}
<<<<<<< HEAD

=======
>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2
.legend i {
  width: 12px;
  height: 12px;
  float: left;
  margin-right: 8px;
  opacity: 0.7;
}

<<<<<<< HEAD
=======

>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2
.info {
  padding: 6px 8px;
  font: 10px/14px Arial, Helvetica, sans-serif;
  background: white;
  background: rgba(255,255,255,0.8);
  box-shadow: 0 0 15px rgba(0,0,0,0.2);
  border-radius: 5px;
}
<<<<<<< HEAD

=======
>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2
.info h4 {
  margin: 0 0 5px;
  color: #777;
}
</style>

<script type="text/javascript">
<<<<<<< HEAD


// **********
// Convoluted intake of data from javascript to python
// ********** 

// var url_to_click;
// var $submitBtn = document.querySelector("#search");
// $submitBtn.addEventListener("click", handleSubmitClick);

// function handleSubmitClick() {
//   event.preventDefault();
//   var city_, state_, cuisine_;
//   city_ = document.getElementById("city").value.toUpperCase();
//   state_ = document.getElementById("state").value.toUpperCase();
//   cuisine_ = document.getElementById("cuisine").value.toUpperCase();

// console.log(city_);
// console.log(state_);
// console.log(cuisine_);
// };

// function fetch(link){
//     event.preventDefault();
//     var city_, state_, cuisine_;
//     city_ = document.getElementById("city").value.toUpperCase();
//     state_ = document.getElementById("state").value.toUpperCase();
//     cuisine_ = document.getElementById("cuisine").value.toUpperCase();

//         console.log(city_);
//         console.log(state_);
//         console.log(cuisine_);
//     url_to_click = `fetch/city=${city_}&state=${state_}&cuisine=${cuisine_}`;
//     link = link+url_to_click;
//         console.log(link);
//         console.log(url_to_click);
//         console.log(link)
//     window.location.href = link;
// };



// **********
// FAQ Popup
// **********

var faq_name = "Yummy Data FAQ";

// var faq_msg = [
// "1. How do I use this?",
// "type in a city, a state, and a cuisine, press search, and wait.",
// "2. It's taking forever?",
// "deal with it."
// ]
// ;
var faq_msg =
"1. How do I use this?<br/>" +
"type in a city, a state, and a cuisine, press search, and wait.<br/>" +
"2. It's taking forever?<br/>" +
"deal with it.<br/>" +
"3. How does it work?<br/>" + 
"Leaflet + API calls + JS.msg"
;

var msg_cust = Msg.factory(
{
	class:"white",
	overlay_class:"white",
	window_inner_x_class:"red",
	enable_titlebar:true,
	window_width:"65%"
})



// **********
// Variables
// **********

var api_key = 'pk.eyJ1IjoibWFya29kYXRhdml6IiwiYSI6ImNqZWxyOGI2ZDRtNnUyd3FlN3B1Z2xmN2IifQ.0gVFx-w1WG9dfSpK5iyO_Q'
var mapbox = "https://api.mapbox.com/styles/v1/mapbox/outdoors-v10/tiles/256/{z}/{x}/{y}?" +
`access_token=${api_key}`;
var zippopulation;
=======
var api_key = 'pk.eyJ1IjoibWFya29kYXRhdml6IiwiYSI6ImNqZWxyOGI2ZDRtNnUyd3FlN3B1Z2xmN2IifQ.0gVFx-w1WG9dfSpK5iyO_Q'
var mapbox = "https://api.mapbox.com/styles/v1/mapbox/outdoors-v10/tiles/256/{z}/{x}/{y}?" +
`access_token=${api_key}`;
// var geojson;
>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2
// var points;
var clusters = L.markerClusterGroup();
// var myMap = L.map('map', {
//   center: [36.7749, -97.4194],
//   zoom: 5
// });
// L.tileLayer(mapbox).addTo(myMap);

<<<<<<< HEAD

var city_ = document.getElementById("city").value.toUpperCase();
var state_ = document.getElementById("state").value.toUpperCase();
var cuisine_ = document.getElementById("cuisine").value.toUpperCase();

$.get("/getpythondata", function(data) {
    console.log(data)
})

console.log(city_);
console.log(state_);
console.log(cuisine_);


=======
>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2
var zipcodetosearch=[];
var population=[];
var income=[];
var selectedgeo=[];
var plotgeo={};
var plotcluster=[];
var zip_url='/zips/austintx';
var restaurant_url='/restaurant';
var zipjson='static/zips.json'

<<<<<<< HEAD

// **********
// Intake All Data
// **********

=======
>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2
// first d3 query for zip_url to search then get a list of zip code we need to use to search for 
//json data in the zipjson file
 d3.json(zip_url,function(queryzip){
    queryzip.forEach(i =>{
        income.push(i.AverageIncome);
        zipcodetosearch.push(i.Zip+'');
        population.push(i.Population);
    })

//before search for zipcodes first get the restaurant_data for restaurant
d3.json(restaurant_url, function(restaurant_data){

d3.json(zipjson, function(zipdata){
<<<<<<< HEAD
    

    console.log(zipdata);


// **********
// make geoJSON file for population and income layers
// ********** 
=======

//____________________________________________________
// make geoJSON file for population and income layers
//___________________________________________________
>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2

  var features=zipdata.features;
  for (var i=0;i<zipcodetosearch.length;i++){
            for (var j=0;j<features.length;j++){
                var featureobj=features[j];
                if(featureobj.properties.ZCTA5CE10==zipcodetosearch[i]){
                featureobj.properties['Population']=population[i];
                featureobj.properties['Income']=income[i];
                selectedgeo.push(featureobj);
    
                }  
            }
        }
    // make ZIP geoJASON file
    plotgeo['type']='"FeatureCollection"';
    plotgeo['name']="cb_2017_us_zcta510_500k";
    plotgeo['features']=selectedgeo;
    // console.log(plotgeo);

<<<<<<< HEAD


// **********
// Chloropleth Functions
// ********** 

=======
>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2
// write a function to color scale population
function getColor_Pop(d) {
    return d > 50000 ? '#800026' :
           d > 40000  ? '#BD0026' :
           d > 30000  ? '#E31A1C' :
           d > 20000  ? '#FC4E2A' :
           d > 15000   ? '#FD8D3C' :
           d > 10000   ? '#FEB24C' :
           d > 5000   ? '#FED976' :
                      '#FFEDA0';
}

// write a function to color scare income; 
//scale is based on percentile of income per capita in the US;
function getColor_Income(d) {
    return d > 60000 ? '#91003f' :
           d > 45000  ? '#ce1256' :
           d > 35000  ? '#e7298a' :
           d > 25000  ? '#df65b0' :
           d > 20000   ? '#c994c7' :
           d > 15000   ? '#d4b9da' :
           d > 10000   ? '#e7e1ef' :
                      '#f7f4f9';
}

// get style for population
function style_population(feature) {
        return {
            fillColor: getColor_Pop(feature.properties.Population),
            weight: 2,
            opacity: 1,
            color: 'white',
            dashArray: '3',
            fillOpacity: 0.7
            };
        }
<<<<<<< HEAD

=======
>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2
// get style for income
function style_income(feature) {
        return {
                fillColor: getColor_Income(feature.properties.Income),
                weight: 2,
                opacity: 1,
                color: 'white',
                dashArray: '3',
                fillOpacity: 0.7
                };
            }
<<<<<<< HEAD
// highlight drawn zipcode area on mouseover
=======


>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2
function highlightFeature(e) {
    var layer = e.target;
    layer.setStyle({
        weight: 5,
        color: '#666',
        dashArray: '',
        fillOpacity: 0.7
    });
    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
        layer.bringToFront();
    }
}
<<<<<<< HEAD

// un-highlight when mouse leaves
function resetHighlight(e) {
    zippopulation.resetStyle(e.target);
}

// this doesn't work but it should zoom in on a zipcode are when clicked
=======
function resetHighlight(e) {
    geojson.resetStyle(e.target);
}
>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2
function zoomToFeature(e) {
    map.fitBounds(e.target.getBounds());
}

<<<<<<< HEAD
// create a marker & popup for each location
=======
>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2
function onEachFeature(feature, layer) {
            layer.on({
                mouseover: highlightFeature,
                mouseout: resetHighlight
<<<<<<< HEAD
            }).bindPopup("<strong><center><h4>" + feature.properties.ZCTA5CE10 + "</strong></center></h4><br/>"+ 
                        "<center>Current population: : <i>" + (feature.properties.Population).toLocaleString()
                        + "</i></center><br/> " +
                        "<center>Average Income: <i>" + Math.floor(feature.properties.Income).toLocaleString()
                        + "</i></center><br/>" +
                        "<hr>");
=======
            }).bindPopup("<h3>" +"Zipcode: "+feature.properties.ZCTA5CE10+"<br/>"+ 
                        "Population: "+feature.properties.Population +"<br/> "+
                        "Average Income: "+Math.floor(feature.properties.Income) +"<br/>"+
                        "</h3><hr>");
>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2
              }

// make population layer and income layer
var zippopulation=L.geoJSON(plotgeo,{style:style_population,onEachFeature: onEachFeature});
var zipincome=L.geoJSON(plotgeo,{style:style_income,onEachFeature: onEachFeature});


<<<<<<< HEAD


// **********
// Create Cluster Layers
// ********** 

var vizIcon = L.icon({
    //   iconUrl: 'https://emojipedia-us.s3.amazonaws.com/thumbs/160/facebook/105/slice-of-pizza_1f355.png',
      iconUrl: pickIcon(),
      iconSize: [60,50]
    });

// customize the icon!    
function pickIcon(food){
    if (food == "pizza"){
        return "https://emojipedia-us.s3.amazonaws.com/thumbs/160/facebook/105/slice-of-pizza_1f355.png"
    } else if(food == "chinese"){
        return "https://www.flaticon.com/premium-icon/icons/svg/661/661740.svg"
    } else if(food == "brewery"){
        return "https://image.flaticon.com/icons/svg/202/202127.svg"
    } else if(food == "burger" || "fastfood"){
        return "https://image.flaticon.com/icons/svg/579/579048.svg"
    } else if(food == "japanese"){
        return "https://image.flaticon.com/icons/svg/805/805342.svg"
    } else {
        return "https://image.flaticon.com/icons/svg/66/66281.svg"
    }
    };

=======
//______________________________________________________
// Make cluster Layer
//______________________________________________________

// pick icon image 
var vizIcon = L.icon({
      iconUrl: 'https://emojipedia-us.s3.amazonaws.com/thumbs/160/facebook/105/slice-of-pizza_1f355.png',
      iconSize: [60,50]
    });

>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2
 // make a cluster marker layer   
var markers = L.markerClusterGroup();

// bind each restaurant_data as marker to markers group
 for (var i = 0; i < restaurant_data.length; i++) {
    var object = restaurant_data[i];
    markers.addLayer(L.marker([object.Latitude,object.Longitude],{icon: vizIcon})
<<<<<<< HEAD
        .bindPopup("<h4><center>" + object.Name + "</h4><br/>" + 
        "<center>Price: " + object.Price_Level + "</center><br/> " +
        "<center>Rating: " + object.Rating + "</center><br/>" +
        "<hr>"));
  }

// **********
// Add Layers to Map
// ********** 
=======
        .bindPopup("<h3>" +"Name: "+object.Name+"<br/>"+ 
        "Price: "+object.Price_Level +"<br/> "+
        "Rating: "+object.Rating +"<br/>"+
        "</h3><hr>"));
  }

//_______________________________________________________________
//Put layers on the map
//________________________________________________________________
>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2

var streetmap = L.tileLayer("https://api.mapbox.com/styles/v1/mapbox/outdoors-v10/tiles/256/{z}/{x}/{y}?" +
        "access_token=pk.eyJ1IjoieWl6aGl5aW4iLCJhIjoiY2plbTJwc2s0NGJnOTJ4bzc5M2Uyb3dmcSJ9.s5k3QArmTecuSneRayd8fg");

var satellite = L.tileLayer("https://api.mapbox.com/styles/v1/mapbox/satellite-streets-v9/tiles/256/{z}/{x}/{y}?" +
        "access_token=pk.eyJ1IjoieWl6aGl5aW4iLCJhIjoiY2plbTJwc2s0NGJnOTJ4bzc5M2Uyb3dmcSJ9.s5k3QArmTecuSneRayd8fg");

<<<<<<< HEAD
=======

>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2
var baseMaps = {
            "Street Map": streetmap,
            "Satellite Map": satellite
          };
        
var overlayMaps = {
            "Population": zippopulation,
            "Income":zipincome,
            "Restaurants":markers
          };
        
<<<<<<< HEAD
=======
    
>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2
var myMap = L.map("map", {
            center: [30.307182, -97.755996],
            zoom: 9,
            layers: [streetmap, zippopulation]
          });
<<<<<<< HEAD
           
=======
        
        
>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2
L.control.layers(baseMaps,overlayMaps, {
                  collapsed: false
                }).addTo(myMap);

<<<<<<< HEAD

// **********
// Create the legend
// ********** 
=======
//____________________________________________
// Create legend for population and zip layer
//_____________________________________________
>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2

var pop_legend=L.control({position: 'bottomright'});
var income_legend=L.control({position: 'bottomright'});

pop_legend.onAdd = function(map){
var div = L.DomUtil.create('div', 'info legend'),
            grades = [0, 5000, 10000, 15000, 20000, 30000, 40000, 50000],
            labels = [];
            div.innerHTML+='  Population:<br/>'
            
                // loop through our density intervals and generate a label with a colored square for each interval
            for (var i = 0; i < grades.length; i++) {
                    div.innerHTML +='<i style="background:' + getColor_Pop(grades[i] + 1) + '">&nbsp&nbsp&nbsp</i> ' +
                                    grades[i] + (grades[i + 1] ? '&ndash;' + grades[i + 1] + '<br/>' : '+');
                }
               
                return div;
            };

income_legend.onAdd = function (map){
            var div = L.DomUtil.create('div', 'info legend'),
                    grades = [0, 10000, 15000, 20000, 25000, 35000, 45000, 60000],
                    labels = [];
                    div.innerHTML+='  Income:<br/>'
            
                // loop through our density intervals and generate a label with a colored square for each interval
                for (var i = 0; i < grades.length; i++) {
                    div.innerHTML +='<i style="background:' + getColor_Income(grades[i] + 1) + '">&nbsp&nbsp&nbsp</i> ' +
                                    grades[i] + (grades[i + 1] ? '&ndash;' + grades[i + 1] + '<br/>' : '+');
                }
               
                return div;
    
        };

pop_legend.addTo(myMap);
    
<<<<<<< HEAD
// switch legend on selection
=======
    // switch legend
>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2
myMap.on('overlayadd',function(eventLayer){
        if(eventLayer.name=='Population'){
            this.removeControl(income_legend);
            pop_legend.addTo(this);}
        else if(eventLayer.name=='Income'){this.removeControl(pop_legend);
            income_legend.addTo(this);}
        // else if (eventLayer.name=='Restaurants')
        // {this.removeControl(pop_legend)|| this.removeControl(income_legend)}

    });

});
});
});   

<<<<<<< HEAD


=======
>>>>>>> d3270cbb668029129fa20cdc1df7d6790fd2d9e2
</script>

</body>
</html>